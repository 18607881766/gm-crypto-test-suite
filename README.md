# 国密测试套件（GM Crypto Test Suite）

这是基于Golang的国密测试套件，用于测试国密SM2实现库或KMS服务，并验证其与[tjfoc-gm库](https://github.com/tw-bc-group/tjfoc-gm)的兼容性。

## 测试对象

测试对象分为2种：KMS、国密算法库中的SM2非对称密钥。

1. KMS(Key Management Service)是密钥管理服务，由服务提供商提供密钥的计算、存储服务，开发者通过调用其api完成密钥的生成、删除、加解密、签名验签等操作。
   一般情况下，对于非对称密钥（SM2），开发者无法获取私钥，使用服务商提供的KeyID作为密钥的标识；同时，开发者可以获取公钥，将公钥正确解析后，直接用于加密、验签。
2. 国密算法库是对国密算法的实现，可以是源代码或链接库的形式，完全在本地运行。

简言之，二者差异在于：
* KMS无法获取私钥，仅有KeyID；算法库可以直接使用私钥
* KMS在密钥生成、签名、解密时是远程计算；算法库全部是本地计算

## 为什么要测试

1. 密钥、签名的编码格式可能不同
   比方说，对于公钥，有的库可能通用的编码规则，如ASN1编码；有的可能使用自己的编码方式或不进行任何编码，如把byte格式的X值和Y值直接拼接。这使得所需的公钥的解析方式不同。

2. 存在使用公钥直接加密、验签的场景
   在对现有系统进行国密化改造时，原有的加密方案可能依赖于可解析的公钥、私钥。一个改动较少的方案是，仅改造涉及私钥的部分，包括密钥生成、签名、解密的操作；而通过公钥就可进行的操作，包括验签、加密，在可以解析公钥的情况下就不需要额外的改造。

## 测试范围

### KMS

#### 测试库自洽
- [ ] 密钥生成
- [ ] 加密再解密
- [ ] 签名再验签

#### 兼容tjfoc库
- [ ] tjfoc加密，测试库再解密
- [ ] 测试库签名，tjfoc再验签

#### 并发测试
- [ ] 测试框架
- [ ] 测试示例

### 国密算法库

#### 测试库自洽
- [ ] 密钥生成
- [ ] 加密再解密
- [ ] 签名再验签

#### 兼容tjfoc库
- [ ] tjfoc加密，测试库再解密
- [ ] 测试库加密，tjfoc解密
- [ ] 测试库签名，tjfoc再验签
- [ ] tjfoc签名，测试库再验签
